---
import { formatBakes } from '../utils'
import { getCollection } from 'astro:content'
import Layout from '../layouts/Layout.astro'

const bakes = formatBakes(await getCollection('bakes'))
bakes.sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
---

<Layout title="Baking Log - Greg Skriloff" description="A personal sourdough baking log.">
  <Fragment slot="head">
    <meta name="robots" content="noindex, nofollow" />
  </Fragment>

  <main class="container">
    <div class="section">
      <a class="bake-back" href="/">← Home</a>
      <h1>Baking Log</h1>
      <div class="content">
        <ul>
          {
            bakes.map((bake) => {
              const formatted = new Intl.DateTimeFormat('en-US', {
                year: 'numeric',
                day: 'numeric',
                month: 'short',
              }).format(bake.data.date)

              return (
                <li>
                  <a href={`/baking/${bake.id}`}>
                    {bake.data.title ? `${formatted} — ${bake.data.title}` : formatted}
                  </a>
                </li>
              )
            })
          }
        </ul>
        <p style="color: var(--color-secondary-text); font-size: 0.875rem;">
          ...and dozens of other loaves before I started this log. See some on <a
            href="https://goodbread.nyc/?ref=gregskril.com"
            target="_blank"
            rel="noopener">goodbread.nyc</a
          >
        </p>
      </div>
    </div>
  </main>
</Layout>
